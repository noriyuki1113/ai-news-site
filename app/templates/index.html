{% extends "base.html" %}

{% block content %}
<div class="articles-grid">
  {% for article in articles %}
  <article class="article-card">
    {% if article.image_url %}
    <div class="article-image">
      <img src="{{ article.image_url }}" alt="{{ article.title }}" loading="lazy">
    </div>
    {% endif %}

    <div class="article-content">
      <div class="article-meta">
        <span class="category">{{ article.category }}</span>
        <span class="source">{{ article.source }}</span>
      </div>

      <h2 class="article-title">
        <a href="{{ url_for('main.article_detail', article_id=article.id) }}">{{ article.title }}</a>
      </h2>

      {% if article.summary_ja %}
        <p class="article-snippet" style="white-space: pre-line;">{{ article.summary_ja }}</p>
      {% else %}
        <p class="article-snippet">{{ (article.snippet or '')[:200] }}...</p>
      {% endif %}

      <div class="article-footer">
        <span class="views">ğŸ‘ï¸ {{ article.views }}å›</span>
        <a href="{{ url_for('main.article_detail', article_id=article.id) }}" class="read-more">è©³ç´° â†’</a>
      </div>
    </div>
  </article>
  {% endfor %}
</div>

{% if pagination.pages > 1 %}
<div class="pagination">
  {% if pagination.has_prev %}
    <a href="{{ url_for('main.index', page=pagination.prev_num, category=current_category) }}">â† å‰ã¸</a>
  {% endif %}
  <span>{{ pagination.page }} / {{ pagination.pages }}</span>
  {% if pagination.has_next %}
    <a href="{{ url_for('main.index', page=pagination.next_num, category=current_category) }}">æ¬¡ã¸ â†’</a>
  {% endif %}
</div>
{% endif %}
{% endblock %}
